import{S as _,d as D,b as I,c as h,a as w,D as A,A as E,O as L,e as O}from"./create-form-ca682449.js";import{j as p,b as R,c as M,f as $,r as z}from"./chunk-ZJJGQIVY-3d316dd5.js";import{r as l}from"./index-76fb7be0.js";import{c as N}from"./chunk-O3SWHQEE-d6839529.js";import{c as H}from"./chunk-ITIKTQWJ-0c049f00.js";import{u as T,j as V,k as j,a as q,S as G,l as J}from"./steps-fd703130.js";import{B as K}from"./chunk-UVUR7MCU-4e62fe64.js";const[Q,U]=H({name:"StepFormContext",errorMessage:"useStepFormContext: `context` is undefined. Seems you forgot to wrap step form components in `<StepForm />`"});function W(e){const{onChange:n,steps:a,resolver:r,fieldResolver:o,...c}=e,i=T(c),[m,C]=l.useState(a),{activeStep:S,isLastStep:f,nextStep:x}=i,[u,s]=l.useState({}),d=l.useRef({}),k=l.useCallback(async t=>{var F,b;try{const v=u[S];if(d.current={...d.current,...t},f){await((F=e.onSubmit)==null?void 0:F.call(e,d.current)),B({...v,isCompleted:!0}),x();return}await((b=v.onSubmit)==null?void 0:b.call(v,t,i)),x()}catch{}},[u,S,f,d]),P=l.useCallback(()=>{const t=u[S];return{onSubmit:k,schema:t==null?void 0:t.schema,resolver:t!=null&&t.schema?r==null?void 0:r(t.schema):void 0,fieldResolver:t!=null&&t.schema?o==null?void 0:o(t.schema):void 0}},[u,k,S,r,o]),B=l.useCallback(t=>{const F=m==null?void 0:m.find(b=>b.name===t.name);s(b=>({...b,[t.name]:{...t,schema:F==null?void 0:F.schema}}))},[u,m]);return{getFormProps:P,updateStep:B,steps:u,...i}}function g(e){const{name:n,schema:a,resolver:r,onSubmit:o}=e,c=V({name:n}),{steps:i,updateStep:m}=U();return l.useEffect(()=>{m({name:n,schema:a,resolver:r,onSubmit:o})},[n,a]),{...c,...i[n]||{name:n,schema:a}}}const ce=e=>{const{activeIndex:n,setIndex:a}=j(),{children:r,orientation:o,variant:c,colorScheme:i,size:m,onChange:C,render:S,...f}=e,x=l.Children.map(r,s=>{if(l.isValidElement(s)&&(s==null?void 0:s.type)===y){const{isCompleted:d}=g(s.props);return p.jsx(q,{render:S,name:s.props.name,title:s.props.title,isCompleted:d,...f,children:s.props.children})}return s}),u=l.useCallback(s=>{a(s),C==null||C(s)},[]);return p.jsx(G,{orientation:o,step:n,variant:c,colorScheme:i,size:m,onChange:u,children:x})},y=e=>{const{name:n,children:a,className:r,onSubmit:o,...c}=e,i=g({name:n,onSubmit:o}),{isActive:m}=i;return m?p.jsx(R.div,{...c,className:N("sui-form__step",r),children:a}):null};y.displayName="FormStep";const X=e=>{const{isFirstStep:n,isCompleted:a,prevStep:r}=j();return p.jsx(K,{isDisabled:n||a,children:"Back",...e,className:N("sui-form__prev-button",e.className),onClick:M(e.onClick,r)})};X.displayName="PrevButton";const Y=e=>{const{label:n="Next",submitLabel:a="Complete",...r}=e,{isLastStep:o,isCompleted:c}=j();return p.jsx(_,{...r,isDisabled:c,className:N("sui-form__next-button",e.className),children:o||c?a:n})};Y.displayName="NextButton";function Z({fields:e,resolver:n,fieldResolver:a,getBaseField:r}={}){const o=$((c,i)=>{const{children:m,steps:C,...S}=c,f=W({resolver:n,fieldResolver:a,...c}),{getFormProps:x,...u}=f,s=l.useMemo(()=>u,[u]),d={fields:{...D,...e},getBaseField:r};return p.jsx(J,{value:s,children:p.jsx(Q,{value:s,children:p.jsx(I,{value:d,children:p.jsx(h,{ref:i,...S,...x(),children:z(m,{...f,Field:w,FormStep:y,DisplayIf:A,ArrayField:E,ObjectField:L})})})})})});return o.displayName=`Step${h.displayName||h.name}`,o}const me=O(),ie=Z();export{me as F,Y as N,X as P,ie as S,ce as a,y as b,Z as c,U as u};
