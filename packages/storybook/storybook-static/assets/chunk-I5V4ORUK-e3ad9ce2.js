import{c as L,u as z}from"./index-514c0e80.js";import{s as Z,n as y,e as J,o as O,j as R,f as Q,b as W,g as Y}from"./chunk-ZJJGQIVY-3d316dd5.js";import{c as ee}from"./index-7abe7895.js";import{m as ne}from"./index-17e33fe9.js";import{r as u}from"./index-76fb7be0.js";import{g as te}from"./index-e1b4ee4c.js";var[se,ve,oe,ae]=L(),[ue,ie]=ee({name:"PinInputContext",errorMessage:"usePinInputContext: `context` is undefined. Seems you forgot to all pin input fields within `<PinInput />`"}),G=o=>o==null?void 0:o.split("");function U(o,a){return(a==="alphanumeric"?/^[a-zA-Z0-9]+$/i:/^[0-9]+$/).test(o)}function re(o={}){const{autoFocus:a,value:i,defaultValue:r,onChange:c,onComplete:l,placeholder:C="â—‹",manageFocus:m=!0,otp:_=!1,id:k,isDisabled:N,isInvalid:D,type:I="number",mask:j}=o,X=u.useId(),E=k??`pin-input-${X}`,t=oe(),[M,A]=u.useState(!0),[V,w]=u.useState(-1),[x,d]=z({defaultValue:G(r)||[],value:G(i),onChange:n=>c==null?void 0:c(n.join(""))});u.useEffect(()=>{if(a){const n=t.first();n&&requestAnimationFrame(()=>{n.node.focus()})}},[t]);const B=u.useCallback(n=>{if(!M||!m)return;const e=t.next(n,!1);e&&requestAnimationFrame(()=>{e.node.focus()})},[t,M,m]),P=u.useCallback((n,e,s=!0)=>{const p=[...x];p[e]=n,d(p),n!==""&&p.length===t.count()&&p.every(g=>g!=null&&g!=="")?l==null||l(p.join("")):s&&B(e)},[x,d,B,l,t]),H=u.useCallback(()=>{var n;const e=Array(t.count()).fill("");d(e);const s=t.first();(n=s==null?void 0:s.node)==null||n.focus()},[t,d]),S=u.useCallback((n,e)=>{let s=e;return(n==null?void 0:n.length)>0&&(n[0]===e.charAt(0)?s=e.charAt(1):n[0]===e.charAt(1)&&(s=e.charAt(0))),s},[]);return{getInputProps:u.useCallback(n=>{const{index:e,...s}=n,p=h=>{const f=h.target.value,v=x[e],F=S(v,f);if(F===""){P("",e);return}if(f.length>2){if(U(f,I)){const b=f.split("").filter((me,q)=>q<t.count());d(b),b.length===t.count()&&(l==null||l(b.join("")))}}else U(F,I)&&P(F,e),A(!0)},$=h=>{var f;if(h.key==="Backspace"&&m)if(h.target.value===""){const v=t.prev(e,!1);v&&(P("",e-1,!1),(f=v.node)==null||f.focus(),A(!0))}else A(!1)},g=()=>{w(e)},K=()=>{w(-1)},T=V===e;return{"aria-label":"Please enter your pin code",inputMode:I==="number"?"numeric":"text",type:j?"password":I==="number"?"tel":"text",...s,id:`${E}-${e}`,disabled:N,"aria-invalid":Z(D),onChange:y(s.onChange,p),onKeyDown:y(s.onKeyDown,$),onFocus:y(s.onFocus,g),onBlur:y(s.onBlur,K),value:x[e]||"",autoComplete:_?"one-time-code":"off",placeholder:T?"":C}},[t,V,S,E,N,j,D,m,l,_,C,P,d,I,x]),id:E,descendants:t,values:x,setValue:P,setValues:d,clear:H}}function le(o={},a=null){const{getInputProps:i}=ie(),{index:r,register:c}=ae();return i({...o,ref:ne(c,a),index:r})}function ce(o){const a=J("PinInput",o),{children:i,...r}=O(o),{descendants:c,...l}=re(r),C=te(i).map(m=>u.cloneElement(m,{__css:a}));return R.jsx(se,{value:c,children:R.jsx(ue,{value:l,children:C})})}ce.displayName="PinInput";var de=Q(function(a,i){const r=le(a,i);return R.jsx(W.input,{...r,className:Y("chakra-pin-input",a.className)})});de.displayName="PinInputField";export{ce as P,de as a};
