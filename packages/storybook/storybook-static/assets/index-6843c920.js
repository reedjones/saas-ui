import{g as p,a as b,i as F,b as E}from"./index-660fa4d3.js";import{u as d}from"./index-938a7d6c.js";import{u as h}from"./index-3e7aa64e.js";import{u as v}from"./index-5f92aa2b.js";import{r as a}from"./index-76fb7be0.js";function S(t){const n=t.current;if(!n)return!1;const e=b(n);return!e||n.contains(e)?!1:!!F(e)}function k(t,n){const{shouldFocus:e,visible:u,focusRef:s}=n,r=e&&!u;v(()=>{if(!r||S(t))return;const o=(s==null?void 0:s.current)||t.current;let c;if(o)return c=requestAnimationFrame(()=>{o.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(c)}},[r,t,s])}var A={preventScroll:!0,shouldFocus:!1};function x(t,n=A){const{focusRef:e,preventScroll:u,shouldFocus:s,visible:r}=n,o=O(t)?t.current:t,c=s&&r,i=a.useRef(c),m=a.useRef(r);h(()=>{!m.current&&r&&(i.current=c),m.current=r},[r,c]);const l=a.useCallback(()=>{if(!(!r||!o||!i.current)&&(i.current=!1,!o.contains(document.activeElement)))if(e!=null&&e.current)requestAnimationFrame(()=>{var f;(f=e.current)==null||f.focus({preventScroll:u})});else{const f=p(o);f.length>0&&requestAnimationFrame(()=>{f[0].focus({preventScroll:u})})}},[r,u,o,e]);v(()=>{l()},[l]),d(o,"transitionend",l)}function O(t){return"current"in t}function y(t){const{isOpen:n,ref:e}=t,[u,s]=a.useState(n),[r,o]=a.useState(!1);return a.useEffect(()=>{r||(s(n),o(!0))},[n,r,u]),d(()=>e.current,"animationend",()=>{s(n)}),{present:!(n?!1:!u),onComplete(){var i;const m=E(e.current),l=new m.CustomEvent("animationend",{bubbles:!0});(i=e.current)==null||i.dispatchEvent(l)}}}function L(t){const{wasSelected:n,enabled:e,isSelected:u,mode:s="unmount"}=t;return!!(!e||u||s==="keepMounted"&&n)}export{y as a,x as b,L as l,k as u};
